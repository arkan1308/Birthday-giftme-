<!DOCTYPE html>
<html lang="id">
<head>
    <title>Ucapan Ultah Interaktif</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            height: 100vh; background: url('background.jpg') no-repeat center/cover;
            display: flex; justify-content: center; align-items: center; font-family: 'Comic Sans MS', cursive;
            overflow: hidden;
        }
        .screen { position: absolute; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; flex-direction: column; }
        .hidden { display: none; }
        .balloon { width: 120px; height: 150px; border-radius: 50%; position: absolute; cursor: pointer; }
        #kue, .giftbox, .boneka { width: 150px; cursor: pointer; }
        .photo { width: 90vw; max-width: 300px; height: 90vw; max-height: 300px; object-fit: cover; }
        .chatBubble { background: white; padding: 10px 15px; border-radius: 20px; font-size: 18px; margin: 5px; max-width: 80%; }
        #kue { position: absolute; bottom: -200px; transition: bottom 1s; }
    </style>
</head>
<body>

<!-- Intro Balon -->
<div id="intro" class="screen">
    <div class="balloon" style="top:30%;left:20%;background:red;" onclick="explode(this)"></div>
    <div class="balloon" style="top:40%;left:60%;background:blue;" onclick="explode(this)"></div>
    <div class="balloon" style="top:60%;left:40%;background:green;" onclick="explode(this)"></div>
</div>

<!-- Surat -->
<div id="letterScreen" class="screen hidden">
    <img src="envelope.png" onclick="openLetter()">
</div>

<!-- Ucapan & Kue -->
<div id="ucapanScreen" class="screen hidden">
    <img src="foto.jpg" class="photo">
    <div id="chatBox"></div>
    <img src="kue.png" id="kue" onclick="chooseGiftbox()">
</div>

<!-- Pilih Giftbox -->
<div id="giftScreen" class="screen hidden">
    <div style="display:flex;gap:30px;">
        <img src="giftbox.png" class="giftbox" onclick="chooseBox('kiri')">
        <img src="giftbox.png" class="giftbox" onclick="chooseBox('kanan')">
    </div>
</div>

<!-- Pilih Boneka -->
<div id="bonekaScreen" class="screen hidden">
    <div style="display:flex;gap:20px;overflow-x:auto;width:100%;">
        <img src="bear.png" class="boneka" onclick="showDoa('bear')">
        <img src="rabbit.png" class="boneka" onclick="showDoa('rabbit')">
        <img src="cat.png" class="boneka" onclick="showDoa('cat')">
    </div>
</div>

<!-- Doa Akhir -->
<div id="doaScreen" class="screen hidden">
    <div class="chatBubble" id="doaText"></div>
    <button onclick="goToWA()">Kirim Kesan Pesan</button>
</div>

<script>
let balloons = 3;

function explode(balloon) {
    balloon.style.background = 'url(explode.png) center/cover';
    setTimeout(() => balloon.remove(), 500);
    balloons--;
    if (balloons === 0) document.getElementById('letterScreen').classList.remove('hidden');
}

function openLetter() {
    document.getElementById('letterScreen').classList.add('hidden');
    document.getElementById('ucapanScreen').classList.remove('hidden');
    typeChat(["Selamat ulang tahun!", "Semoga sehat selalu.", "Bahagia dan sukses menyertaimu."]);
}

function typeChat(messages, index = 0) {
    if (index < messages.length) {
        let bubble = document.createElement('div');
        bubble.className = 'chatBubble';
        document.getElementById('chatBox').appendChild(bubble);

        let text = messages[index];
        let i = 0;
        function typing() {
            if (i < text.length) {
                bubble.textContent += text[i++];
                setTimeout(typing, 50);
            } else {
                setTimeout(() => typeChat(messages, index + 1), 500);
            }
        }
        typing();
    } else {
        document.getElementById('kue').style.bottom = '30px';
    }
}

function chooseGiftbox() {
    document.getElementById('ucapanScreen').classList.add('hidden');
    document.getElementById('giftScreen').classList.remove('hidden');
}

function chooseBox(side) {
    document.getElementById('giftScreen').classList.add('hidden');
    const lucky = Math.random() > 0.5;

    if (lucky) {
        document.getElementById('bonekaScreen').classList.remove('hidden');
    } else {
        showDoa('kurangBeruntung');
    }
}

function showDoa(type) {
    document.getElementById('bonekaScreen').classList.add('hidden');
    document.getElementById('doaScreen').classList.remove('hidden');

    let doaText = {
        bear: "Semoga kamu sekuat beruang, menghadapi semua tantangan hidup!",
        rabbit: "Semoga kamu secepat kelinci dalam mengejar mimpi-mimpimu!",
        cat: "Semoga kamu seluwes dan seberuntung kucing!",
        kurangBeruntung: "Yah kamu kurang beruntung, tapi gapapa! Tetap ada doa terbaik buatmu: Semoga sehat, bahagia, dan semua impianmu tercapai!"
    };

    document.getElementById('doaText').innerText = doaText[type];
}

function goToWA() {
    window.location.href = "https://wa.me/6283838763673?text=Terima%20kasih%20atas%20ucapannya!";
}
</script>

</body>
</html>
