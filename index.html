<!DOCTYPE html>
<html lang="id">
<head>
    <title>Ucapan Ultah Interaktif</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            height: 100vh; background: url('background.jpg') no-repeat center/cover;
            display: flex; justify-content: center; align-items: center; font-family: 'Comic Sans MS', cursive;
            overflow: hidden;
        }
        .screen {
            position: absolute; width: 100%; height: 100%;
            display: flex; justify-content: center; align-items: center; flex-direction: column;
            text-align: center;
        }
        .hidden { display: none; }

        .balloon {
            width: 80px; height: 110px; border-radius: 50%;
            position: absolute; cursor: pointer;
            animation: float 5s infinite ease-in-out;
        }
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-50px); }
        }

        .photo {
            width: 90vw; max-width: 400px; height: 90vw; max-height: 400px;
            object-fit: cover; border-radius: 15px;
        }
        .chatBubble {
            background: white; padding: 20px; border-radius: 20px; font-size: 20px;
            max-width: 90%; text-align: center; margin-top: 15px;
            position: relative; box-shadow: 0 0 10px rgba(0,0,0,0.2);
        }
        #kue {
            width: 200px; position: absolute; bottom: -250px; transition: bottom 1s; cursor: pointer;
        }
        #ucapanScreen {
            gap: 15px; transform: translateY(0); transition: transform 1s;
            align-items: center;
        }
        .giftbox { width: 120px; cursor: pointer; }
        .boneka { width: 140px; cursor: pointer; }

        p, button {
            font-size: 22px;
        }
        button {
            padding: 12px 25px; cursor: pointer;
        }
    </style>
</head>
<body>

<div id="intro" class="screen">
    <div class="balloon" style="background:red; top:60%; left:20%;" onclick="explode(this)"></div>
    <div class="balloon" style="background:blue; top:70%; left:50%;" onclick="explode(this)"></div>
    <div class="balloon" style="background:green; top:65%; left:80%;" onclick="explode(this)"></div>
</div>

<div id="letterScreen" class="screen hidden">
    <img src="envelope.png" style="width: 220px;" onclick="openLetter()">
</div>

<div id="ucapanScreen" class="screen hidden">
    <img src="foto.jpg" class="photo">
    <div class="chatBubble" id="chatBubble"></div>
    <img src="kue.png" id="kue" onclick="chooseGiftbox()">
</div>

<div id="giftScreen" class="screen hidden">
    <p>Pilih kotak hadiah:</p>
    <div style="display:flex;gap:30px;">
        <img src="giftbox.png" class="giftbox" onclick="chooseBox(true)">
        <img src="giftbox.png" class="giftbox" onclick="chooseBox(false)">
    </div>
</div>

<div id="bonekaScreen" class="screen hidden">
    <p>Pilih boneka kesukaanmu:</p>
    <div style="display:flex;gap:30px;">
        <img src="bear.png" class="boneka" onclick="showDoa('Beruang')">
        <img src="rabbit.png" class="boneka" onclick="showDoa('Kelinci')">
        <img src="cat.png" class="boneka" onclick="showDoa('Kucing')">
    </div>
</div>

<div id="doaScreen" class="screen hidden">
    <div class="chatBubble" id="doaBubble"></div>
    <button onclick="sendToWA()">Kirim Pesan & Kesan ke WhatsApp</button>
</div>

<script>
let balloons = 3;

function explode(balloon) {
    balloon.style.background = 'url(explode.png) center/cover';
    setTimeout(() => balloon.remove(), 500);
    balloons--;
    if (balloons === 0) document.getElementById('letterScreen').classList.remove('hidden');
}

function openLetter() {
    document.getElementById('letterScreen').classList.add('hidden');
    document.getElementById('ucapanScreen').classList.remove('hidden');
    typeChat("Selamat ulang tahun! Semoga sehat selalu, bahagia, dan semua cita-cita terkabul.");
}

function typeChat(message) {
    let bubble = document.getElementById('chatBubble');
    bubble.innerHTML = ""; 
    let i = 0;

    function typing() {
        if (i < message.length) {
            bubble.innerHTML += message[i++];
            setTimeout(typing, 50);
        } else {
            setTimeout(naikkanFotoDanChat, 500);
        }
    }
    typing();
}

function naikkanFotoDanChat() {
    document.getElementById('ucapanScreen').style.transform = 'translateY(-50px)';
    setTimeout(() => document.getElementById('kue').style.bottom = '50px', 1000);
}

function chooseGiftbox() {
    document.getElementById('ucapanScreen').classList.add('hidden');
    document.getElementById('giftScreen').classList.remove('hidden');
}

function chooseBox(lucky) {
    document.getElementById('giftScreen').classList.add('hidden');
    if (lucky) {
        document.getElementById('bonekaScreen').classList.remove('hidden');
    } else {
        showDoa("Panjang");
    }
}

function showDoa(boneka) {
    document.getElementById('bonekaScreen').classList.add('hidden');
    document.getElementById('doaScreen').classList.remove('hidden');
    let doaText = "";
    if (boneka === "Beruang") {
        doaText = "Semoga kamu kuat seperti beruang, tegar dalam menghadapi masalah dan selalu melindungi orang tersayang.";
    } else if (boneka === "Kelinci") {
        doaText = "Semoga kamu ceria seperti kelinci, penuh semangat menjalani hidup dan membawa kebahagiaan bagi sekitar.";
    } else if (boneka === "Kucing") {
        doaText = "Semoga kamu selalu tenang, bijak, dan penuh kasih sayang seperti kucing yang menggemaskan.";
    } else {
        doaText = "Yah, kamu belum beruntung... Tapi nggak apa-apa, doa terbaik tetap buat kamu: panjang umur, sehat selalu, sukses, dan bahagia.";
    }
    typeDoa(doaText);
}

function typeDoa(message) {
    let bubble = document.getElementById('doaBubble');
    bubble.innerHTML = "";
    let i = 0;

    function typing() {
        if (i < message.length) {
            bubble.innerHTML += message[i++];
            setTimeout(typing, 50);
        }
    }
    typing();
}

function sendToWA() {
    let waLink = "https://wa.me/62xxxxxx?text=" + encodeURIComponent("Pesan dan kesan setelah dapat kejutan ini...");
    window.location.href = waLink;
}
</script>

</body>
</html>
