<!DOCTYPE html>
<html lang="id">
<head>
    <title>Ucapan Ultah Interaktif</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            height: 100vh; background: url('background.jpg') no-repeat center/cover;
            display: flex; justify-content: center; align-items: center; font-family: 'Comic Sans MS', cursive;
            overflow: hidden;
        }
        .screen { position: absolute; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; flex-direction: column; }
        .hidden { display: none; }

        .balloon {
            width: 60px; height: 80px; border-radius: 50%;
            position: absolute; cursor: pointer;
            animation: float 5s infinite ease-in-out;
        }
        @keyframes float {
            0% { transform: translateY(0) translateX(0); }
            25% { transform: translateY(-30px) translateX(-10px); }
            50% { transform: translateY(-60px) translateX(10px); }
            75% { transform: translateY(-90px) translateX(-10px); }
            100% { transform: translateY(-120px) translateX(10px); }
        }

        .photo {
            width: 90vw; max-width: 350px; height: 90vw; max-height: 350px; object-fit: cover;
            border-radius: 10px;
        }
        .chatBubble {
            background: white; padding: 15px; border-radius: 15px; font-size: 18px; /* lebih besar */
            max-width: 90%; text-align: center; margin-top: 10px;
            position: relative;
        }
        #kue {
            width: 180px; position: absolute; bottom: -200px; transition: bottom 1s; cursor: pointer;
        }
        #ucapanScreen { gap: 10px; transform: translateY(0); transition: transform 1s; align-items: center; }
        .giftbox { width: 100px; cursor: pointer; }
        .boneka { width: 120px; cursor: pointer; }
    </style>
</head>
<body>

<div id="intro" class="screen">
    <div class="balloon" style="background:red; top:60%; left:20%;" onclick="explode(this)"></div>
    <div class="balloon" style="background:blue; top:70%; left:50%;" onclick="explode(this)"></div>
    <div class="balloon" style="background:green; top:65%; left:80%;" onclick="explode(this)"></div>
</div>

<div id="letterScreen" class="screen hidden">
    <img src="envelope.png" style="width: 200px;" onclick="openLetter()">
</div>

<div id="ucapanScreen" class="screen hidden">
    <img src="foto.jpg" class="photo">
    <div class="chatBubble" id="chatBubble"></div>
    <img src="kue.png" id="kue" onclick="chooseGiftbox()">
</div>

<div id="giftScreen" class="screen hidden">
    <p style="margin-bottom: 10px; font-size:18px;">Pilih kotak hadiah:</p>
    <div style="display:flex;gap:20px;">
        <img src="giftbox.png" class="giftbox" onclick="chooseBox(true)">
        <img src="giftbox.png" class="giftbox" onclick="chooseBox(false)">
    </div>
</div>

<div id="bonekaScreen" class="screen hidden">
    <p style="margin-bottom: 10px; font-size:18px;">Pilih boneka kesukaanmu:</p>
    <div style="display:flex;gap:20px;">
        <img src="bear.png" class="boneka" onclick="showDoa('Beruang')">
        <img src="rabbit.png" class="boneka" onclick="showDoa('Kelinci')">
        <img src="cat.png" class="boneka" onclick="showDoa('Kucing')">
    </div>
</div>

<div id="doaScreen" class="screen hidden">
    <div class="chatBubble" id="doaBubble"></div>
    <button onclick="sendToWA()" style="margin-top: 20px; padding: 10px 20px; font-size:18px;">Kirim Pesan & Kesan ke WhatsApp</button>
</div>

<script>
let balloons = 3;

function explode(balloon) {
    balloon.style.background = 'url(explode.png) center/cover';
    setTimeout(() => balloon.remove(), 500);
    balloons--;
    if (balloons === 0) document.getElementById('letterScreen').classList.remove('hidden');
}

function openLetter() {
    document.getElementById('letterScreen').classList.add('hidden');
    document.getElementById('ucapanScreen').classList.remove('hidden');
    typeChat("Selamat ulang tahun! Semoga sehat selalu, bahagia, dan semua cita-cita terkabul.");
}

function typeChat(message) {
    let bubble = document.getElementById('chatBubble');
    bubble.innerHTML = ""; 
    let i = 0;

    function typing() {
        if (i < message.length) {
            bubble.innerHTML += message[i++];
            setTimeout(typing, 50);
        } else {
            setTimeout(naikkanFotoDanChat, 500);
        }
    }
    typing();
}

function naikkanFotoDanChat() {
    document.getElementById('ucapanScreen').style.transform = 'translateY(-40px)';
    setTimeout(() => document.getElementById('kue').style.bottom = '30px', 1000);
}

function chooseGiftbox() {
    document.getElementById('ucapanScreen').classList.add('hidden');
    document.getElementById('giftScreen').classList.remove('hidden');
}

function chooseBox(lucky) {
    document.getElementById('giftScreen').classList.add('hidden');
    if (lucky) {
        document.getElementById('bonekaScreen').classList.remove('hidden');
    } else {
        showDoa("Panjang");
    }
}

function showDoa(boneka) {
    document.getElementById('bonekaScreen').classList.add('hidden');
    document.getElementById('doaScreen').classList.remove('hidden');
    let doaText = "";
    if (boneka === "Beruang") {
        doaText = "Semoga kamu kuat seperti beruang dan selalu melindungi orang yang kamu sayang.";
    } else if (boneka === "Kelinci") {
        doaText = "Semoga kamu ceria seperti kelinci, selalu lincah dan membawa kebahagiaan ke semua orang.";
    } else if (boneka === "Kucing") {
        doaText = "Semoga kamu selalu santai, tenang, dan penuh kasih sayang seperti kucing yang menggemaskan.";
    } else {
        doaText = "Walaupun kamu kurang beruntung, doa terbaik tetap untukmu: Semoga panjang umur, sehat selalu, sukses dalam karir, dan dikelilingi orang baik.";
    }
    typeDoa(doaText);
}

function typeDoa(message) {
    let bubble = document.getElementById('doaBubble');
    bubble.innerHTML = "";
    let i = 0;

    function typing() {
        if (i < message.length) {
            bubble.innerHTML += message[i++];
            setTimeout(typing, 50);
        }
    }
    typing();
}

function sendToWA() {
    let waLink = "https://wa.me/62xxxxxx?text=" + encodeURIComponent("Pesan dan kesan setelah dapat kejutan ini...");
    window.location.href = waLink;
}
</script>

</body>
</html>
